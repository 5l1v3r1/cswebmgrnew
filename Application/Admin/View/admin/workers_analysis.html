<extend name="public/template" />
<block name="headerlink">
	<!-- BEGIN PAGE LEVEL STYLES -->
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/select2/select2.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/css/datepicker.css"/>
	<!-- END PAGE LEVEL STYLES -->
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/admin/pages/css/pagecode.css"/>
	<script src="https://d3js.org/d3.v4.min.js"></script>
</block>
<block name="siderbarmenu">
	<ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
		<!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
		<li class="sidebar-toggler-wrapper">
			<!-- BEGIN SIDEBAR TOGGLER BUTTON -->
			<div class="sidebar-toggler">
			</div>
			<!-- END SIDEBAR TOGGLER BUTTON -->
		</li>
		<!-- DOC: To remove the search box from the sidebar you just need to completely remove the below "sidebar-search-wrapper" LI element -->
		<li class="sidebar-search-wrapper">
			<!-- BEGIN RESPONSIVE QUICK SEARCH FORM -->
			<!-- DOC: Apply "sidebar-search-bordered" class the below search form to have bordered search box -->
			<!-- DOC: Apply "sidebar-search-bordered sidebar-search-solid" class the below search form to have bordered & solid search box -->
			<form class="sidebar-search " action="extra_search.html" method="POST">
				<a href="javascript:;" class="remove">
				<i class="icon-close"></i>
				</a>
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Search...">
					<span class="input-group-btn">
					<a href="javascript:;" class="btn submit"><i class="icon-magnifier"></i></a>
					</span>
				</div>
			</form>
			<!-- END RESPONSIVE QUICK SEARCH FORM -->
		</li>
		<li class="start">
			<a href="javascript:;">
			<i class="icon-home"></i>
			<span class="title">Dashboard</span>
			<span class="selected"></span>
			<span class="arrow open"></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Dashboard/index');}">
					<i class="icon-bar-chart"></i>
					Default Dashboard</a>
				</li>
				<li>
					<a href="{:U('Dashboard/showDataMoneyAnalysis');}">
					<i class="icon-bar-chart"></i>
					Data Analysis</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="icon-basket"></i>
			<span class="title">eCommerce</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="ecommerce_index.html">
					<i class="icon-home"></i>
					Dashboard</a>
				</li>
				<li>
					<a href="{:U('Order/orderlist?flag=2');}">
					<i class="icon-bell"></i>
					<span class="badge badge-danger">{$cin}</span>
					Orders Ongoing</a>
				</li>
				<li>
					<a href="{:U('Order/orderlist?flag=4');}">
					<i class="fa fa-warning"></i>
					<span class="badge badge-danger">{$cin1}</span>
					<font color="red">Orders Warning</font></a>
				</li>
				<li>
					<a href="{:U('Order/orderlist?flag=1');}">
					<i class="fa fa-lock"></i>
					Complete Orders</a>
				</li>
				<li>
					<a href="{:U('Order/orderlist?flag=3');}">
					<i class="icon-basket"></i>
					Orders All</a>
				</li>
				<li>
					<a href="#">
						<i class="icon-bar-chart"></i>
						Data Analysis
					</a>
				</li>
			</ul>
		</li>
		<li  class="active">
			<a href="javascript:;">
				<i class="fa fa-code"></i>
				<span class="title">Workers</span>
				<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="ecommerce_index.html">
					<i class="icon-home"></i>
					Dashboard</a>
				</li>
				<if condition="$type eq 1">
					<li>
						<a href="{:U('Worker/workerlist');}">
							<i class="icon-basket"></i>
							ALL Workers Workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=4');}">
							<i class="icon-basket"></i>
							free workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=5');}">
							<i class="icon-basket"></i>
							busy workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=2');}">
							<i class="icon-basket"></i>
							Income > 0
						</a>
					</li>
					<li class="active">
						<a href="{:U('Worker/workerlist?type=1');}">
							<i class="icon-basket"></i>
							Income = 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=3');}">
							<i class="icon-basket"></i>
							dead workers
						</a>
					</li>
				<elseif condition="$type eq 2"/>
					<li>
						<a href="{:U('Worker/workerlist');}">
							<i class="icon-basket"></i>
							ALL Workers Workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=4');}">
							<i class="icon-basket"></i>
							free workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=5');}">
							<i class="icon-basket"></i>
							busy workers
						</a>
					</li>
					<li class="active">
						<a href="{:U('Worker/workerlist?type=2');}">
							<i class="icon-basket"></i>
							Income > 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=1');}">
							<i class="icon-basket"></i>
							Income = 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=3');}">
							<i class="icon-basket"></i>
							dead workers
						</a>
					</li>
				<elseif condition="$type eq 3"/>
					<li>
						<a href="{:U('Worker/workerlist');}">
							<i class="icon-basket"></i>
							ALL Workers Workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=4');}">
							<i class="icon-basket"></i>
							free workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=5');}">
							<i class="icon-basket"></i>
							busy workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=2');}">
							<i class="icon-basket"></i>
							Income > 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=1');}">
							<i class="icon-basket"></i>
							Income = 0
						</a>
					</li>
					<li class="active">
						<a href="{:U('Worker/workerlist?type=3');}">
							<i class="icon-basket"></i>
							dead workers
						</a>
					</li>
				<elseif condition="$type eq 4"/>
					<li>
						<a href="{:U('Worker/workerlist');}">
							<i class="icon-basket"></i>
							ALL Workers Workers
						</a>
					</li>
					<li class="active">
						<a href="{:U('Worker/workerlist?type=4');}">
							<i class="icon-basket"></i>
							free workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=5');}">
							<i class="icon-basket"></i>
							busy workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=2');}">
							<i class="icon-basket"></i>
							Income > 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=1');}">
							<i class="icon-basket"></i>
							Income = 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=3');}">
							<i class="icon-basket"></i>
							dead workers
						</a>
					</li>
				<elseif condition="$type eq 5"/>
					<li>
						<a href="{:U('Worker/workerlist');}">
							<i class="icon-basket"></i>
							ALL Workers Workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=4');}">
							<i class="icon-basket"></i>
							free workers
						</a>
					</li>
					<li class="active">
						<a href="{:U('Worker/workerlist?type=5');}">
							<i class="icon-basket"></i>
							busy workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=2');}">
							<i class="icon-basket"></i>
							Income > 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=1');}">
							<i class="icon-basket"></i>
							Income = 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=3');}">
							<i class="icon-basket"></i>
							dead workers
						</a>
					</li>
				<else />
					<li class="active">
						<a href="{:U('Worker/workerlist');}">
							<i class="icon-basket"></i>
							ALL Workers Workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=4');}">
							<i class="icon-basket"></i>
							free workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=5');}">
							<i class="icon-basket"></i>
							busy workers
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=2');}">
							<i class="icon-basket"></i>
							Income > 0
						</a>
					</li>
					<li >
						<a href="{:U('Worker/workerlist?type=1');}">
							<i class="icon-basket"></i>
							Income = 0
						</a>
					</li>
					<li>
						<a href="{:U('Worker/workerlist?type=3');}">
							<i class="icon-basket"></i>
							dead workers
						</a>
					</li>
				</if>

				<li>
					<a href="#">
						<i class="icon-bar-chart"></i>
						Data Analysis
					</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="fa fa-wrench" aria-hidden="true"></i>
			<span class="title">Tools</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Tool/exchangeToolPage');}">
						<i class="fa fa-usd" aria-hidden="true"></i> Exchange Transfer Tool
					</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="icon-settings"></i>
			<span class="title">Configuration</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Configure/exchangelist');}">
						Exchange Rate
					</a>
				</li>
				<li>
					<a href="{:U('Configure/techlist');}">
						Technologies Conf
					</a>
				</li>
				<li>
					<a href="{:U('Configure/tradelist');}">
						Trade Conf
					</a>
				</li>

			</ul>
		</li>
	</ul>
</block>
<block name="container">
	<div class="page-content">
			<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<!-- BEGIN STYLE CUSTOMIZER -->
			<!-- END STYLE CUSTOMIZER -->
			<!-- BEGIN PAGE HEADER-->
			<div class="page-bar">
				<ul class="page-breadcrumb">
					<li>
						<i class="fa fa-home"></i>
						<a href="{:U('Dashboard/index');}">Home</a>
						<i class="fa fa-angle-right"></i>
					</li>
					<li>
						<a href="#">Dashboard</a>
					</li>
				</ul>
			</div>
			<h3 class="page-title">
			Workers Dashboard <small>reports & statistics</small>
			</h3>
			<!-- END PAGE HEADER-->
			<!-- BEGIN DASHBOARD STATS -->
			<div class="row">
				<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
					<div class="dashboard-stat blue-madison">
						<div class="visual">
							<i class="fa fa-comments"></i>
						</div>
						<div class="details">
							<div class="number">
								 {$workertotal.worker_total} <i class="fa fa-cny"></i>
							</div>
							<div class="desc">
								 Total No.
							</div>
						</div>
						<a class="more" href="javascript:;">
						View more <i class="m-icon-swapright m-icon-white"></i>
						</a>
					</div>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
					<div class="dashboard-stat red-intense">
						<div class="visual">
							<i class="fa fa-bar-chart-o"></i>
						</div>
						<div class="details">
							<div class="number">
								 {$workertotal.worker_doing} <i class="fa fa-cny"></i>
							</div>
							<div class="desc">
								 Busy No.
							</div>
						</div>
						<a class="more" href="javascript:;">
						View more <i class="m-icon-swapright m-icon-white"></i>
						</a>
					</div>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
					<div class="dashboard-stat green-haze">
						<div class="visual">
							<i class="fa fa-shopping-cart"></i>
						</div>
						<div class="details">
							<div class="number">
								 {$workertotal.worker_unpaidsalary} <i class="fa fa-cny"></i>
							</div>
							<div class="desc">
								 Unpaid
							</div>
						</div>
						<a class="more" href="javascript:;">
						View more <i class="m-icon-swapright m-icon-white"></i>
						</a>
					</div>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
					<div class="dashboard-stat purple-plum">
						<div class="visual">
							<i class="fa fa-globe"></i>
						</div>
						<div class="details">
							<div class="number">
								 {$workertotal.worker_unpaid} <i class="fa fa-cny"></i>
							</div>
							<div class="desc">
								 Unpaid No.
							</div>
						</div>
						<a class="more" href="javascript:;">
						View more <i class="m-icon-swapright m-icon-white"></i>
						</a>
					</div>
				</div>
			</div>
			<!-- END DASHBOARD STATS -->
			<div class="clearfix"></div>
			<div class="row">
				<div class="col-md-6 col-sm-6">
				<!-- BEGIN PORTLET-->
					<div class="portlet light ">
						<div class="portlet-title">
							<div class="caption">
								<i class="icon-bar-chart font-green-sharp hide"></i>
								<span class="caption-subject font-green-sharp bold uppercase">Global statistic</span>
								<span class="caption-helper">global statistic...</span>
							</div>
						</div>
						<div class="portlet-body">
							<div class="portlet-body">
								<div class="row static-info">
									<div class="col-md-6 name">
										 Total No. :
									</div>
									<div class="col-md-6 value">
										 <i class="fa fa-paper-plane"></i> {$workertotal.worker_total} 
									</div>
								</div>
								<div class="row static-info">
									<div class="col-md-6 name">
										 Busy No. :
									</div>
									<div class="col-md-6 value">
										 <i class="fa fa-paper-plane"></i> {$workertotal.worker_doing}
									</div>
								</div>
								<div class="row static-info">
									<div class="col-md-6 name">
										 Free No. :
									</div>
									<div class="col-md-6 value">
										 <i class="fa fa-paper-plane"></i> {$workertotal.worker_free}
									</div>
								</div>
								<div class="row static-info">
									<div class="col-md-6 name">
										 All Salary :
									</div>
									<div class="col-md-6 value">
										 <i class="fa fa-paper-plane"></i> {$workertotal.worker_salary} RMB
									</div>
								</div>
								<div class="row static-info">
									<div class="col-md-6 name">
										 Unpaid Salary :
									</div>
									<div class="col-md-6 value">
										 <i class="fa fa-paper-plane"></i> {$workertotal.worker_unpaidsalary} RMB
									</div>
								</div>
								<hr/>
							</div>
						</div>
					</div>
				<!-- END PORTLET-->
			</div>
				<div class="col-md-6 col-sm-6">
				<!-- BEGIN PORTLET-->
					<div class="portlet light ">
						<div class="portlet-title">
							<div class="caption">
								<i class="icon-bar-chart font-green-sharp hide"></i>
								<span class="caption-subject font-green-sharp bold uppercase"> {$todayyear} (current year) statistic</span>
								<span class="caption-helper">current year statistic...</span>
							</div>
						</div>
						<div class="portlet-body">
							<div class="portlet-body">
								<div class="row static-info">
									<div class="col-md-4 name">
										 Revenues :
									</div>
									<div class="col-md-8 value">
										<i class="fa fa-paper-plane"></i> {$cydata.revenuesum} RMB
										<foreach name="cydata.moneyinfo" item="vo">
											<small><i class="fa fa-check-square-o"></i> {$vo['moneytype']} {$vo['revenues']} </small>
										</foreach>
									</div>
								</div>
								<div class="row static-info">
									<div class="col-md-4 name">
										 Profit :
									</div>
									<div class="col-md-8 value">
										 <i class="fa fa-paper-plane"></i> {$cydata.profitsum} RMB
									</div>
								</div>
								<div class="row static-info">
									<div class="col-md-4 name">
										 Worker Salary :
									</div>
									<div class="col-md-8 value">
										 <i class="fa fa-paper-plane"></i> {$cydata.salarysum} RMB
									</div>
								</div>
								<div class="row static-info">
									<div class="col-md-4 name">
										 No. Orders :
									</div>
									<div class="col-md-8 value">
										 <i class="fa fa-paper-plane"></i> {$cydata.ordernum}
									</div>
								</div>
								<div class="row static-info">
									<div class="col-md-4 name">
										 Average profit/day :
									</div>
									<div class="col-md-8 value">
										 <i class="fa fa-paper-plane"></i> {$cydata.profitavg}
									</div>
								</div>
							</div>
						</div>
					</div>
				<!-- END PORTLET-->
				</div>
				<div class="col-md-3 col-sm-3">
					<!-- BEGIN PORTLET-->
					<div class="portlet light ">
						<div class="portlet-title">
							<div class="caption">
								<i class="icon-share font-red-sunglo hide"></i>
								<span class="caption-subject font-red-sunglo bold uppercase">Day statistic</span>
							</div>
						</div>
						<div class="portlet-body">
							<div class="row">
								<div class="col-md-12 col-sm-12">
									<div class="input-group ">
											<div class="input-group date form_meridian_date input-small" data-date="2012-12-21T15:25:00Z">
												<input name="daysearchinput" type="text" size="10" class="form-control input-inline" placeholder="Day" value="{$today}" readonly>
												<span class="input-group-btn">
												<button class="btn default date-set" type="button"><i class="fa fa-calendar"></i></button>
												</span>
											</div>
											<div class="input-group-btn input-large">
												<button class="btn yellow table-group-action-submit" id="daysearchbtn"><i class="fa fa-search"></i></button>
											</div>

											<!-- /input-group -->
									</div>
								</div>
								<div class="col-md-12 col-sm-12 ">
									<div class="row static-info">
										<div class="col-md-4 name">
											 Revenues:
										</div>
										<div class="col-md-8 value">
											 <i class="fa fa-paper-plane" ></i><span id="dayrevenues"></span>
										</div>
									</div>
									<div id="daydatalist">
									</div>
									<div class="row static-info">
										<div class="col-md-4 name">
											 Profit :
										</div>
										<div class="col-md-8 value">
											 <i class="fa fa-paper-plane"></i>  <span id="dayprofit"></span>
										</div>
									</div>
									<div class="row static-info">
										<div class="col-md-4 name">
											 Salary :
										</div>
										<div class="col-md-8 value">
											 <i class="fa fa-paper-plane"></i> <span id="daysalary"></span>
										</div>
									</div>
									<div class="row static-info">
										<div class="col-md-5 name">
											 No. Order :
										</div>
										<div class="col-md-7 value">
											 <i class="fa fa-paper-plane"></i> <span id="dayordernum"></span>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
				<!-- END PORTLET-->
				<div class="col-md-3 col-sm-3">
					<!-- BEGIN PORTLET-->
					<div class="portlet light ">
						<div class="portlet-title">
							<div class="caption">
								<i class="icon-share font-blue-steel hide"></i>
								<span class="caption-subject font-blue-steel bold uppercase">Tools Quick link</span>
							</div>
						</div>
						<div class="portlet-body">
							<div class="portlet-body">
								<div class="portlet-body">
									<div class="row static-info">
										<div class="col-md-12 name">
											<a href="{:U('Tool/exchangeToolPage');}" target="_blank" class="btn btn-block purple"> 1. Exchange Transfer Tools <i class="fa fa-link"></i></a>
										</div>
										<div class="col-md-12 name">
											<a href="{:U('Api/tradeApi');}" target="_blank" class="btn btn-block red"> 2. Trade information api <i class="fa fa-link"></i></a>
										</div>
									</div>
									<hr/>
								</div>
							</div>
						</div>

					</div>
				</div>
				<!-- END PORTLET-->
				<div class="col-md-12 col-sm-12">
						<div class="portlet box green">
							<div class="portlet-title">
								<div class="caption">
									<i class="fa fa-gift"></i> Single Month statistic
								</div>
								<div class="tools">
									<a href="javascript:;" class="collapse" data-original-title="" title="">
									</a>
									<a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title="">
									</a>
									<a href="javascript:;" class="reload" data-original-title="" title="">
									</a>
									<a href="javascript:;" class="remove" data-original-title="" title="">
									</a>
								</div>
							</div>
							<div class="portlet-body form">
								<div class="row">
									
									<div id='stacked-bar' class="chart" style="padding: 0px; position: relative;width:100%;height: auto;"></div>
								</div>

							</div>
						</div>
				</div>
				<div class="col-md-12 col-sm-12">
						<div class="portlet box green">
							<div class="portlet-title">
								<div class="caption">
									<i class="fa fa-gift"></i> One Year statistic <small>12 monthes of one year</small>
								</div>
								<div class="tools">
									<a href="javascript:;" class="collapse" data-original-title="" title="">
									</a>
									<a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title="">
									</a>
									<a href="javascript:;" class="reload" data-original-title="" title="">
									</a>
									<a href="javascript:;" class="remove" data-original-title="" title="">
									</a>
								</div>
							</div>
							<div class="portlet-body form">
								<div class="row">
									<div class="col-md-12 col-sm-12">
										<div class="form-group">
											<div class="col-md-3 col-sm-12 text-right">
												<div class="input-group ">
													<select class="form-control input-inline input-medium" name="yearinput">
														<option value="2018">2018</option>
														<option value="2019" selected>2019</option>
														<option value="2020">2020</option>
														<option value="2021">2021</option>
														<option value="2022">2022</option>
													</select>
												</div>
												<!-- /input-group -->
											</div>
											<div class="col-md-1 col-sm-12">
												<button class="btn yellow table-group-action-submit" id="yearsearchbtn"><i class="fa fa-search"></i></button>
											</div>
											<div class="col-md-4 col-sm-12">
												<h3 class="text-right"><i class="fa fa-calendar"></i> <span id="yearspan"></span></h3>
											</div>
											<div class="col-md-4 col-sm-12">
												<div class="tile bg-red-sunglo">
													<div class="tile-body" style="padding-left:2%;padding-top:2%;padding-bottom:2%">
														<h4>Salary/mon: <span id="yearsalarysum"></span></h4>
															<h4>Profit/mon: <span id="yearprofitsum"></span></h4>
															<h4>Revenues/mon: <span id="yearrevenuessum"></span></h4>

													</div>
												</div>
											</div>
										</div>
									</div>
									<div id="chart_year" class="chart" style="padding: 0px; position: relative;width:100%;height: 400px;">
									</div>
								</div>

							</div>
						</div>
				</div>
			</div>
			<div class="clearfix">
			</div>
		</div>
</block>
<block name="footscript">
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/select2/select2.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="__PUBLIC__/metronic3_7/assets/global/scripts/metronic.js" type="text/javascript"></script>
	<script src="__PUBLIC__/metronic3_7/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>

	<!-- END PAGE LEVEL SCRIPTS -->
	<script>
			jQuery(document).ready(function() {
           Metronic.init(); // init metronic core components
Layout.init(); // init current layout
			});

var initStackedBarChart = {
	draw: function(config) {
		me = this,
		domEle = config.element,
		stackKey = config.key,
		data = config.data,
		margin = {top: 20, right: 20, bottom: 30, left: 50},
		parseDate = d3.timeParse("%m/%Y"),
		width = 960 - margin.left - margin.right,
		height = 500 - margin.top - margin.bottom,
		xScale = d3.scaleLinear().rangeRound([0, width]),
		yScale = d3.scaleBand().rangeRound([height, 0]).padding(0.1),
		color = d3.scaleOrdinal(d3.schemeCategory20),
		xAxis = d3.axisBottom(xScale),
		yAxis =  d3.axisLeft(yScale).tickFormat(d3.timeFormat("%b")),
		svg = d3.select("#"+domEle).append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
				.append("g")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		var stack = d3.stack()
			.keys(stackKey)
			/*.order(d3.stackOrder)*/
			.offset(d3.stackOffsetNone);
	
		var layers= stack(data);
			data.sort(function(a, b) { return b.total - a.total; });
			yScale.domain(data.map(function(d) { return parseDate(d.date); }));
			xScale.domain([0, d3.max(layers[layers.length - 1], function(d) { return d[0] + d[1]; }) ]).nice();

		var layer = svg.selectAll(".layer")
			.data(layers)
			.enter().append("g")
			.attr("class", "layer")
			.style("fill", function(d, i) { return color(i); });

		  layer.selectAll("rect")
			  .data(function(d) { return d; })
			.enter().append("rect")
			  .attr("y", function(d) { return yScale(parseDate(d.data.date)); })
			  .attr("x", function(d) { return xScale(d[0]); })
			  .attr("height", yScale.bandwidth())
			  .attr("width", function(d) { return xScale(d[1]) - xScale(d[0]) });

			svg.append("g")
			.attr("class", "axis axis--x")
			.attr("transform", "translate(0," + (height+5) + ")")
			.call(xAxis);

			svg.append("g")
			.attr("class", "axis axis--y")
			.attr("transform", "translate(0,0)")
			.call(yAxis);							
	}
}
var data = [{"date":"4/1854","total":8571,"disease":1,"wounds":0,"other":5},{"date":"5/1854","total":23333,"disease":12,"wounds":0,"other":9},{"date":"6/1854","total":28333,"disease":11,"wounds":0,"other":6},{"date":"7/1854","total":28772,"disease":359,"wounds":0,"other":23},{"date":"8/1854","total":30246,"disease":828,"wounds":1,"other":30},{"date":"9/1854","total":30290,"disease":788,"wounds":81,"other":70},{"date":"10/1854","total":30643,"disease":503,"wounds":132,"other":128},{"date":"11/1854","total":29736,"disease":844,"wounds":287,"other":106},{"date":"12/1854","total":32779,"disease":1725,"wounds":114,"other":131},{"date":"1/1855","total":32393,"disease":2761,"wounds":83,"other":324},{"date":"2/1855","total":30919,"disease":2120,"wounds":42,"other":361},{"date":"3/1855","total":30107,"disease":1205,"wounds":32,"other":172},{"date":"4/1855","total":32252,"disease":477,"wounds":48,"other":57},{"date":"5/1855","total":35473,"disease":508,"wounds":49,"other":37},{"date":"6/1855","total":38863,"disease":802,"wounds":209,"other":31},{"date":"7/1855","total":42647,"disease":382,"wounds":134,"other":33},{"date":"8/1855","total":44614,"disease":483,"wounds":164,"other":25},{"date":"9/1855","total":47751,"disease":189,"wounds":276,"other":20},{"date":"10/1855","total":46852,"disease":128,"wounds":53,"other":18},{"date":"11/1855","total":37853,"disease":178,"wounds":33,"other":32},{"date":"12/1855","total":43217,"disease":91,"wounds":18,"other":28},{"date":"1/1856","total":44212,"disease":42,"wounds":2,"other":48},{"date":"2/1856","total":43485,"disease":24,"wounds":0,"other":19},{"date":"3/1856","total":46140,"disease":15,"wounds":0,"other":35}];
var key = ["wounds", "other", "disease"];
initStackedBarChart.draw({
	data: data,
	key: key,
	element: 'stacked-bar'
});

	</script>
</block>
